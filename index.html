<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#000b1d">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>LUDO PARTY - ELITE & WALLET</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- ==============================================
     MESSAGE OVERLAY
     ============================================== -->
<div id="message-overlay">মেসেজ</div>

<!-- ==============================================
     SETTINGS MODAL (Elite)
     ============================================== -->
<div class="modal-overlay" id="modalOverlay">
    <div class="options-box" id="optionsBox">
        <div class="close-btn" onclick="closeModal()">
            <svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
                <circle cx="20" cy="20" r="20" fill="#e74c3c" stroke="#c0392b" stroke-width="2"/>
                <path d="M13 13 L27 27 M27 13 L13 27" stroke="white" stroke-width="4" stroke-linecap="round"/>
            </svg>
        </div>
        <div class="options-title">OPTIONS</div>
        <div class="setting-item">
            <span class="setting-label">SOUND</span>
            <div class="toggle-switch active" onclick="toggleSwitch(this)">
                <svg width="60" height="30" viewBox="0 0 60 30">
                    <rect x="0" y="0" width="60" height="30" rx="15" class="toggle-bg" />
                    <circle cx="15" cy="15" r="13" class="toggle-knob" />
                </svg>
            </div>
        </div>
        <div class="setting-item">
            <span class="setting-label">MUSIC</span>
            <div class="toggle-switch active" onclick="toggleSwitch(this)">
                <svg width="60" height="30" viewBox="0 0 60 30">
                    <rect x="0" y="0" width="60" height="30" rx="15" class="toggle-bg" />
                    <circle cx="15" cy="15" r="13" class="toggle-knob" />
                </svg>
            </div>
        </div>
        <div class="setting-item">
            <span class="setting-label">CHAT</span>
            <div class="toggle-switch active" onclick="toggleSwitch(this)">
                <svg width="60" height="30" viewBox="0 0 60 30">
                    <rect x="0" y="0" width="60" height="30" rx="15" class="toggle-bg" />
                    <circle cx="15" cy="15" r="13" class="toggle-knob" />
                </svg>
            </div>
        </div>
    </div>
</div>

<!-- ==============================================
     MAIN HOME SCREEN (Elite)
     ============================================== -->
<div id="screen-main" class="screen active">
    <div class="ludo-app">
        <div class="top-bar">
            <div class="settings-btn" onclick="openSettingsModal()">
                <i class="fas fa-cog"></i>
            </div>
        </div>

        <div class="center-content">
            <div class="dice-container">
                <div class="dice" style="animation-delay: 0s;"><i class="fas fa-dice-six"></i></div>
                <div class="dice" style="animation-delay: 0.5s;"><i class="fas fa-dice-five"></i></div>
            </div>

            <div class="brand-name">
                <div class="ludo-letters">
                    <div class="letter" style="border-color: #ffc107; color: #ffc107; animation-delay: 0.1s;">L</div>
                    <div class="letter" style="border-color: #ff4757; color: #ff4757; animation-delay: 0.3s;">U</div>
                    <div class="letter" style="border-color: #2ed573; color: #2ed573; animation-delay: 0.5s;">D</div>
                    <div class="letter" style="border-color: #1e90ff; color: #1e90ff; animation-delay: 0.7s;">O</div>
                </div>
                
                <div class="party-container">
                    <span class="party-letter" style="animation-delay: 0.1s;">P</span>
                    <span class="party-letter" style="animation-delay: 0.2s;">A</span>
                    <span class="party-letter" style="animation-delay: 0.3s;">R</span>
                    <span class="party-letter" style="animation-delay: 0.4s;">T</span>
                    <span class="party-letter" style="animation-delay: 0.5s;">Y</span>
                </div>
            </div>

            <div class="menu-buttons">
                <button class="btn-elite btn-online" onclick="showLoginScreen()">
                    <i class="fas fa-globe-americas"></i> Play Online
                </button>
                <button class="btn-elite btn-offline" onclick="goToSetup()">
                    <i class="fas fa-users"></i> Play Offline
                </button>
            </div>
        </div>

        <div class="bottom-bar">
            <div class="nav-item" onclick="showMessage('Ludo Party Pro AI - Made for fun!')"><i class="fas fa-trophy"></i></div>
            <div class="nav-item" onclick="showMessage('Store coming soon!')"><i class="fas fa-store"></i></div>
            <div class="nav-item" style="color: #ff4757;" onclick="location.reload()"><i class="fas fa-power-off"></i></div>
        </div>
    </div>
</div> 

<!-- ==============================================
     REGISTER SCREEN (Elite)
     ============================================== -->
<div id="screen-register" class="screen">
    <div class="auth-header">
        <button class="nav-circle-btn" onclick="goHome()">
            <i class="fas fa-arrow-left"></i>
        </button>
    </div>

    <div class="auth-container">
        <div class="logo-section">
            <h1 style="color: #fff; font-size: 32px; font-weight: 800; text-transform: uppercase; letter-spacing: 2px; text-shadow: 2px 2px 0px #000;">LUDO PARTY</h1>
            <p style="color: #00d4ff; font-size: 14px; margin-top: 5px; font-weight: bold;">Create your account</p>
        </div>

        <form onsubmit="handleRegister(event)">
            <div class="input-group">
                <div class="input-wrapper">
                    <svg class="input-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
                    <input type="text" id="reg-name" placeholder="FULL NAME" required>
                </div>
            </div>

            <div class="input-group">
                <div class="input-wrapper">
                    <svg class="input-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M17 1.01L7 1c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14z"/></svg>
                    <input type="tel" id="reg-mobile" placeholder="MOBILE" pattern="[0-9]*" required>
                </div>
            </div>

            <div class="input-group">
                <div class="input-wrapper">
                    <svg class="input-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/></svg>
                    <input type="email" id="reg-email" placeholder="EMAIL" required>
                </div>
            </div>

            <div class="input-group">
                <div class="input-wrapper">
                    <svg class="input-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/></svg>
                    <input type="password" id="reg-pass" placeholder="PASSWORD" required>
                    <svg class="toggle-password" onclick="togglePassword('reg-pass', this)" viewBox="0 0 24 24"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
                </div>
            </div>

            <div class="input-group">
                <div class="input-wrapper">
                    <svg class="input-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/></svg>
                    <input type="password" id="reg-confirm-pass" placeholder="CONFIRM PASSWORD" required>
                    <svg class="toggle-password" onclick="togglePassword('reg-confirm-pass', this)" viewBox="0 0 24 24"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
                </div>
            </div>

            <button type="submit" class="auth-btn" id="btn-register-action">Register</button>

            <div class="footer-links">
                Already have an account? <a onclick="showLoginScreen()">Login</a>
            </div>
        </form>
    </div>
</div>

<!-- ==============================================
     LOGIN SCREEN (Elite)
     ============================================== -->
<div id="screen-login" class="screen">
    <div class="auth-header">
        <button class="nav-circle-btn" onclick="goHome()">
            <i class="fas fa-arrow-left"></i>
        </button>
    </div>

    <div class="auth-container">
        <div class="logo-section">
            <svg class="ludo-svg" viewBox="0 0 300 100" xmlns="http://www.w3.org/2000/svg">
                <rect x="0" y="20" width="30" height="30" rx="5" fill="#e53935" stroke="#fff" stroke-width="2"/>
                <circle cx="15" cy="35" r="3" fill="white"/>
                <circle cx="8" cy="28" r="2" fill="white"/>
                <circle cx="22" cy="28" r="2" fill="white"/>
                <circle cx="8" cy="42" r="2" fill="white"/>
                <circle cx="22" cy="42" r="2" fill="white"/>
                <circle cx="15" cy="35" r="3" fill="white"/>

                <text x="40" y="52" font-family="Arial Black, sans-serif" font-size="40" font-weight="900" fill="#00d4ff" style="text-shadow: 2px 2px 0px #000;">LUDO</text>

                <rect x="180" y="20" width="30" height="30" rx="5" fill="#43a047" stroke="#fff" stroke-width="2"/>
                <circle cx="188" cy="28" r="2.5" fill="white"/>
                <circle cx="202" cy="28" r="2.5" fill="white"/>
                <circle cx="188" cy="42" r="2.5" fill="white"/>
                <circle cx="202" cy="42" r="2.5" fill="white"/>

                <text x="110" y="80" font-family="Verdana, sans-serif" font-size="24" font-weight="bold" fill="#ffcc00" letter-spacing="4">PARTY</text>
                
                <rect x="260" y="55" width="20" height="20" rx="3" fill="#1e88e5" stroke="#fff" stroke-width="1"/>
                <circle cx="265" cy="60" r="1.5" fill="white"/>
                <circle cx="275" cy="60" r="1.5" fill="white"/>
                <circle cx="265" cy="70" r="1.5" fill="white"/>
                <circle cx="275" cy="70" r="1.5" fill="white"/>
            </svg>
        </div>

        <form onsubmit="handleLogin(event)">
            <div class="input-group">
                <label for="login-mobile">MOBILE NUMBER</label>
                <div class="input-wrapper">
                    <svg class="input-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/></svg>
                    <input type="tel" id="login-mobile" name="username" placeholder="Enter Mobile Number" required autocomplete="tel">
                </div>
            </div>

            <div class="input-group">
                <label for="login-password">PASSWORD</label>
                <div class="input-wrapper">
                    <svg class="input-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3 3.1-3s3.1 1.29 3.1 3v2z"/></svg>
                    <input type="password" id="login-password" name="password" placeholder="Enter Password" required autocomplete="current-password">
                </div>
            </div>

            <button type="submit" class="auth-btn" id="btn-login-action">Login</button>
        </form>

        <div class="footer-links">
            Don't have an account? <a onclick="showRegisterScreen()">Register</a>
        </div>
    </div>
</div>

<!-- ==============================================
     WALLET DASHBOARD SCREEN
     ============================================== -->
<div id="wallet-dashboard" class="screen">
    <div id="app-container">
        <!-- Header -->
        <header>
            <div class="balance-box">
                <span class="balance-label">Coin Balance</span>
                <div class="balance-amount">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="#fbbf24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm.31-8.86c-1.77-.45-2.34-.94-2.34-1.67 0-.84.79-1.43 2.1-1.43 1.38 0 1.9.66 1.94 1.64h1.71c-.05-1.34-.87-2.57-2.49-2.97V5H10.9v1.69c-1.51.32-2.72 1.3-2.72 2.81 0 1.79 1.49 2.69 3.66 3.21 1.95.46 2.34 1.15 2.34 1.87 0 .53-.39 1.39-2.1 1.39-1.6 0-2.23-.72-2.32-1.64H8.04c.1 1.7 1.36 2.66 2.86 2.97V19h2.34v-1.67c1.52-.29 2.72-1.16 2.73-2.77-.01-2.2-1.9-2.96-3.66-3.42z"/></svg>
                    <span id="header-balance">0</span>
                </div>
            </div>
            <button onclick="logout()" style="background:none; border:none; color:var(--text-muted); font-size:12px; font-weight:600; cursor:pointer; text-transform:uppercase;">
                Logout
            </button>
        </header>

        <!-- Navigation -->
        <nav>
            <button class="nav-btn active" onclick="switchTab('game')">
                <svg viewBox="0 0 24 24"><path d="M21 6H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-10 7H8v3H6v-3H3v-2h3V8h2v3h3v2zm4.5 2c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm4 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/></svg>
                Game
            </button>
            <button class="nav-btn" onclick="switchTab('wallet')">
                <svg viewBox="0 0 24 24"><path d="M21 18v1c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2V5c0-1.1.89-2 2-2h14c1.1 0 2 .9 2 2v1h-9c-1.11 0-2 .9-2 2v8c0 1.1.89 2 2 2h9zm-9-2h10V8H12v8zm4-2.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/></svg>
                Wallet
            </button>
            <button class="nav-btn" onclick="switchTab('history')">
                <svg viewBox="0 0 24 24"><path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"/></svg>
                History
            </button>
            <button class="nav-btn" onclick="switchTab('stats')">
                <svg viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/></svg>
                Stats
            </button>
        </nav>

        <!-- 1. Game Section -->
        <section id="game" class="active">
            <div class="game-board">
                <!-- Select Token -->
                <div class="card blue-border">
                    <div class="section-title">Select Token / Color</div>
                    <div class="token-selector">
                        <div class="token-option t-blue selected" onclick="selectToken(this, 'blue')">B</div>
                        <div class="token-option t-red" onclick="selectToken(this, 'red')">R</div>
                        <div class="token-option t-green" onclick="selectToken(this, 'green')">G</div>
                        <div class="token-option t-yellow" onclick="selectToken(this, 'yellow')">Y</div>
                    </div>
                </div>

                <!-- Select Players -->
                <div class="card blue-border">
                    <div class="section-title">Select Players</div>
                    <div class="player-selector">
                        <button class="player-btn selected" onclick="selectPlayers(this, 2)">2 PLAYERS</button>
                        <button class="player-btn" onclick="selectPlayers(this, 4)">4 PLAYERS</button>
                    </div>
                </div>

                <!-- Select Game & Bet -->
                <div class="card blue-border">
                    <div class="section-title">Select Game</div>
                    
                    <div class="bet-control">
                        <button class="control-btn" onclick="adjustBet(-100)">-</button>
                        <div class="bet-display">Entry: <span id="bet-amount">100</span></div>
                        <button class="control-btn" onclick="adjustBet(100)">+</button>
                    </div>
                    <input type="range" min="100" max="10000" step="100" value="100" style="width:100%; margin:20px 0; accent-color: var(--primary);" oninput="updateBetFromSlider(this.value)">

                    <div class="win-info">
                        <div class="info-item">
                            <span>Winning Prize</span>
                            <strong id="win-amount">190</strong>
                        </div>
                        <div class="info-item" style="text-align:right">
                            <span>Entry Fee</span>
                            <strong id="entry-fee">100</strong>
                        </div>
                    </div>
                </div>

                <button class="play-btn" onclick="playGame()">PLAY NOW</button>
            </div>
        </section>

        <!-- 2. Wallet Section -->
        <section id="wallet">
            <!-- Wallet Tabs -->
            <div class="wallet-tabs">
                <div class="wallet-tab active" id="tab-deposit" onclick="toggleWalletMode('deposit')">Deposit</div>
                <div class="wallet-tab" id="tab-withdraw" onclick="toggleWalletMode('withdraw')">Withdraw</div>
            </div>

            <!-- Deposit Section -->
            <div id="deposit-content">
                <!-- Dynamic Number Display (CLICK TO COPY) -->
                <div class="dynamic-contact-info" onclick="copyAdminNumber()" title="Click to Copy Number">
                    <div class="info-label">Send Money to (<span id="method-label">Bkash</span>) <i class="fas fa-copy"></i></div>
                    <div class="info-number" id="display-number">01710814750</div>
                    <small style="color:var(--text-muted); font-size:10px; display:block; margin-top:5px;">Click number to copy</small>
                </div>

                <h3 style="margin-bottom:15px; font-size:16px;">Select Payment Method</h3>
                
                <div class="payment-methods-grid">
                    <div class="payment-card p-bkash selected" onclick="selectPaymentMethod('bkash', this)">
                        <h4>Bkash</h4>
                        <p>Personal</p>
                    </div>
                    <div class="payment-card p-nagad" onclick="selectPaymentMethod('nagad', this)">
                        <h4>Nagad</h4>
                        <p>Personal</p>
                    </div>
                    <div class="payment-card p-rocket" onclick="selectPaymentMethod('rocket', this)">
                        <h4>Rocket</h4>
                        <p>Personal</p>
                    </div>
                </div>

                <div class="form-group">
                    <label>SENDER NUMBER</label>
                    <input type="number" id="dep-number" class="form-control" placeholder="017xxxxxxxx">
                </div>
                <div class="form-group">
                    <label>AMOUNT (COINS)</label>
                    <input type="number" id="dep-amount" class="form-control" placeholder="Ex: 500">
                </div>
                <div class="form-group">
                    <label>TRANSACTION ID (TrxID)</label>
                    <input type="text" id="dep-trx" class="form-control" placeholder="Enter TrxID">
                </div>
                <button class="action-btn" onclick="requestDeposit()">SUBMIT DEPOSIT REQUEST</button>
            </div>

            <!-- Withdraw Section -->
            <div id="withdraw-content" class="hidden">
                <!-- ADDED: Select Withdraw Method -->
                <h3 style="margin-bottom:15px; font-size:16px;">Select Withdraw Method</h3>
                
                <div class="payment-methods-grid" id="withdraw-methods">
                    <div class="payment-card p-bkash selected" onclick="selectPaymentMethod('bkash', this)">
                        <h4>Bkash</h4>
                        <p>Personal</p>
                    </div>
                    <div class="payment-card p-nagad" onclick="selectPaymentMethod('nagad', this)">
                        <h4>Nagad</h4>
                        <p>Personal</p>
                    </div>
                    <div class="payment-card p-rocket" onclick="selectPaymentMethod('rocket', this)">
                        <h4>Rocket</h4>
                        <p>Personal</p>
                    </div>
                </div>

                <div class="dynamic-contact-info">
                    <div class="info-label">Withdraw System</div>
                    <div class="info-number" style="font-size:14px;">Money will be sent to your selected method number.</div>
                </div>

                <div class="form-group">
                    <label>YOUR NUMBER (<span id="withdraw-method-label">Bkash</span>)</label>
                    <input type="number" id="with-number" class="form-control" placeholder="017xxxxxxxx">
                </div>
                <div class="form-group">
                    <label>COIN AMOUNT (Min: 500, Max: 25000)</label>
                    <input type="number" id="with-amount" class="form-control" placeholder="Enter amount">
                </div>
                <p style="font-size:12px; color:var(--warning); margin-bottom:20px; line-height:1.5;">
                    * Note: Withdraw request will deduct balance immediately. If rejected, the amount will be refunded.
                </p>
                <button class="action-btn" style="background-color:var(--danger);" onclick="requestWithdraw()">SUBMIT WITHDRAW REQUEST</button>
            </div>
        </section>

        <!-- 3. History Section -->
        <section id="history">
            <h3 style="margin-bottom:20px; font-size:18px;">Transaction History</h3>
            <div class="card" style="padding:0; overflow:hidden;">
                <div id="history-list">
                    <!-- History items injected by JS -->
                    <p style="text-align:center; color:var(--text-muted); padding:30px;">No History Found</p>
                </div>
            </div>
        </section>

        <!-- 4. Stats Section -->
        <section id="stats">
            <h3 style="text-align:center; font-size:18px; margin-bottom:10px;">Game Statistics</h3>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-val stat-win" id="stat-win">0</div>
                    <div class="stat-label">Wins</div>
                </div>
                <div class="stat-card">
                    <div class="stat-val stat-loss" id="stat-loss">0</div>
                    <div class="stat-label">Losses</div>
                </div>
            </div>
        </section>
    </div>
    <!-- Wallet Toast -->
    <div id="toast">Message</div>
</div>

<!-- ==============================================
     MATCHMAKING SCREEN
     ============================================== -->
<div id="screen-matchmaking" class="screen">
    <div class="mobile-frame">
        <!-- Sound Toggle -->
        <button class="sound-toggle" id="soundBtn" style="position: absolute; top: 20px; right: 20px; background: none; border: none; color: rgba(255,255,255,0.6); cursor: pointer; z-index: 20;" title="Sound On/Off">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                <path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path>
            </svg>
        </button>

        <header style="padding: 20px; text-align: center; z-index: 10;">
            <div class="brand-name" style="font-size: 24px; font-weight: 800; color: #FFD700; text-transform: uppercase; letter-spacing: 2px; text-shadow: 2px 2px 4px rgba(0,0,0,0.4); margin-bottom: 10px; display: flex; align-items: center; justify-content: center; gap: 10px;">
                <!-- Ludo Icon -->
                <svg width="30" height="30" viewBox="0 0 24 24" fill="#FFD700">
                    <rect x="2" y="2" width="20" height="20" rx="4" fill="#B22222" stroke="white" stroke-width="2"/>
                    <circle cx="6" cy="6" r="2" fill="white"/>
                    <circle cx="18" cy="6" r="2" fill="white"/>
                    <circle cx="6" cy="18" r="2" fill="white"/>
                    <circle cx="18" cy="18" r="2" fill="white"/>
                    <rect x="10" y="10" width="4" height="4" fill="white"/>
                </svg>
                KING LUDO
            </div>
            <div class="game-mode-badge" style="background: rgba(0, 0, 0, 0.3); border: 1px solid #FFD700; color: white; padding: 5px 15px; border-radius: 20px; font-size: 14px; font-weight: 600; display: inline-flex; align-items: center; gap: 5px;">
                ONLINE MULTIPLAYER
            </div>
        </header>

        <div class="game-info" style="position: absolute; top: 20px; left: 0; width: 100%; display: flex; justify-content: space-between; padding: 0 30px; z-index: 5;">
            <div class="info-box" style="background: rgba(0,0,0,0.6); backdrop-filter: blur(5px); padding: 8px 12px; border-radius: 8px; display: flex; flex-direction: column; align-items: center; min-width: 80px;">
                <span class="info-label" style="font-size: 10px; color: #ccc; text-transform: uppercase;">Mode</span>
                <span class="info-value" style="font-size: 14px; font-weight: 700; color: #FFD700;">Classic</span>
            </div>
            <div class="info-box" style="background: rgba(0,0,0,0.6); backdrop-filter: blur(5px); padding: 8px 12px; border-radius: 8px; display: flex; flex-direction: column; align-items: center; min-width: 80px;">
                <span class="info-label" style="font-size: 10px; color: #ccc; text-transform: uppercase;">Entry</span>
                <span class="info-value" id="matchmaking-entry" style="font-size: 14px; font-weight: 700; color: #FFD700;">500</span>
            </div>
        </div>

        <div class="main-stage" style="flex: 1; position: relative; display: flex; justify-content: center; align-items: center; width: 100%;">
            <!-- Custom SVG Graphics: Matchmaking Screen -->
            <svg class="ludo-scene" viewBox="0 0 400 450" xmlns="http://www.w3.org/2000/svg" style="width: 100%; height: 100%; max-height: 500px; object-fit: contain;">
                <defs>
                    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
                        <feDropShadow dx="0" dy="4" stdDeviation="4" flood-color="#000" flood-opacity="0.3"/>
                    </filter>
                    <linearGradient id="cardGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" style="stop-color:#ffffff;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#f0f0f0;stop-opacity:1" />
                    </linearGradient>
                    <clipPath id="circleClip">
                        <circle cx="55" cy="55" r="45" />
                    </clipPath>
                </defs>

                <!-- Background Decoration -->
                <g opacity="0.1" transform="translate(200, 225)">
                    <circle cx="0" cy="0" r="180" fill="none" stroke="#fff" stroke-width="2" stroke-dasharray="10 5"/>
                    <rect x="-100" y="-100" width="200" height="200" fill="none" stroke="#fff" stroke-width="2"/>
                </g>

                <!-- Left Card (User) -->
                <g transform="translate(30, 150)">
                    <rect x="0" y="0" width="110" height="130" rx="10" fill="url(#cardGrad)" filter="url(#shadow)"/>
                    <rect x="10" y="10" width="90" height="90" rx="50" fill="#333"/>
                    <g transform="translate(55, 55)" fill="#fff">
                        <circle cx="0" cy="-15" r="15"/>
                        <path d="M-20 25 Q0 5 20 25 v10 h-40 z"/>
                    </g>
                    <text x="55" y="120" text-anchor="middle" font-family="Poppins" font-weight="bold" font-size="14" fill="#333">YOU</text>
                </g>

                <!-- Right Card (Unknown / AI) -->
                <g transform="translate(260, 150)">
                    <rect x="0" y="0" width="110" height="130" rx="10" fill="url(#cardGrad)" filter="url(#shadow)"/>
                    <rect x="10" y="10" width="90" height="90" rx="50" fill="#ccc"/>
                    
                    <!-- RANDOM IMAGE CHANGE LOGIC START -->
                    <image id="random-avatar-img" x="10" y="10" width="90" height="90" href="" clip-path="url(#circleClip)" preserveAspectRatio="xMidYMid slice" />
                    <!-- RANDOM IMAGE CHANGE LOGIC END -->

                    <text id="opponent-name-text" x="55" y="120" text-anchor="middle" font-family="Poppins" font-weight="bold" font-size="14" fill="#555">Searching...</text>
                </g>

                <!-- Center VS and Loader -->
                <g transform="translate(200, 215)">
                    <circle cx="0" cy="0" r="35" fill="none" stroke="#FFD700" class="pulse-ring"/>
                    <circle cx="0" cy="0" r="30" fill="none" stroke="rgba(255,255,255,0.3)" stroke-width="2"/>
                    <path d="M0 -30 A30 30 0 0 1 26 15" fill="none" stroke="#FFD700" stroke-width="3" stroke-linecap="round" class="radar-spin"/>

                    <circle cx="0" cy="0" r="24" fill="#B22222" stroke="#fff" stroke-width="2"/>
                    <text x="0" y="8" text-anchor="middle" font-family="Poppins" font-weight="900" font-size="16" fill="#fff">VS</text>
                </g>

                <!-- Bottom Ludo Dice Decorations -->
                <g transform="translate(200, 350)">
                    <rect x="-15" y="-15" width="30" height="30" rx="4" fill="#fff" transform="rotate(15)"/>
                    <circle cx="-8" cy="-8" r="2" fill="#000"/>
                    <circle cx="8" cy="8" r="2" fill="#000"/>
                </g>
                <g transform="translate(140, 380)">
                    <rect x="-12" y="-12" width="24" height="24" rx="3" fill="#eee" transform="rotate(-15)"/>
                    <circle cx="0" cy="0" r="2" fill="#000"/>
                </g>
                <g transform="translate(260, 380)">
                    <rect x="-12" y="-12" width="24" height="24" rx="3" fill="#eee" transform="rotate(30)"/>
                    <circle cx="-4" cy="-4" r="1.5" fill="#000"/>
                    <circle cx="4" cy="4" r="1.5" fill="#000"/>
                </g>
            </svg>
        </div>

        <footer style="padding: 30px; text-align: center; background: linear-gradient(to top, rgba(0,0,0,0.8), transparent); z-index: 10;">
            <div class="searching-text" style="font-size: 16px; margin-bottom: 20px; color: #fff; font-weight: 500; letter-spacing: 1px; display: flex; align-items: center; justify-content: center; gap: 8px;">
                SEARCHING FOR PLAYERS
                <div class="dots">
                    <span>.</span><span>.</span><span>.</span>
                </div>
            </div>
            
            <div style="margin-bottom: 15px; font-size: 20px; font-weight: 700; color: #fff;">
                00:<span id="timer">59</span>
            </div>

            <button class="cancel-btn" id="cancelBtn" style="background: transparent; border: 2px solid #fff; color: #fff; padding: 12px 40px; font-size: 14px; font-weight: 700; border-radius: 30px; cursor: pointer; text-transform: uppercase; transition: all 0.3s ease;">Cancel Match</button>
        </footer>

        <!-- Toast Notification -->
        <div class="toast" id="matchmaking-toast" style="position: absolute; bottom: 100px; left: 50%; transform: translateX(-50%) translateY(20px); background: rgba(0,0,0,0.9); color: #fff; padding: 10px 20px; border-radius: 5px; font-size: 14px; opacity: 0; visibility: hidden; transition: all 0.3s; white-space: nowrap; border-left: 4px solid #FFD700;">Matchmaking Cancelled!</div>
    </div>
</div>

<!-- ==============================================
     OTHER ELITE SCREENS (Setup, Game, etc.)
     ============================================== -->
<div id="screen-setup" class="screen">
    <div class="setup-header">
        <button class="back-btn" onclick="goHome()">
            <i class="fas fa-arrow-left"></i>
        </button>
        <div class="settings-btn" onclick="openSettingsModal()">
            <i class="fas fa-cog"></i>
        </div>
    </div>

    <div class="setup-container">
        <h2 class="setup-title">GAME SETUP</h2> 

        <div class="player-mode-selector">
            <div class="mode-btn active" onclick="setMode(2)" id="mode-2p">2P</div>
            <div class="mode-btn" onclick="setMode(3)" id="mode-3p">3P</div>
            <div class="mode-btn" onclick="setMode(4)" id="mode-4p">4P</div>
        </div> 

        <div class="bot-option">
            <span class="bot-label">PLAY WITH BOT (AI)</span>
            <div class="setup-toggle-switch" id="switch-bot" onclick="toggleBotMode()">
                <div class="setup-toggle-knob"></div>
            </div>
        </div> 

        <div class="player-list">
            <div class="player-item" id="item-p1">
                <div class="player-info">
                    <div class="player-avatar" style="background: var(--ludo-red);"></div>
                    <span class="player-name">Player 01</span>
                </div>
                <div class="setup-toggle-switch active" id="switch-p1">
                    <div class="setup-toggle-knob"></div>
                </div>
            </div> 
            <div class="player-item" id="item-p2">
                <div class="player-info">
                    <div class="player-avatar" style="background: var(--ludo-green);"></div>
                    <span class="player-name">Player 02</span>
                </div>
                <div class="setup-toggle-switch active" id="switch-p2">
                    <div class="setup-toggle-knob"></div>
                </div>
            </div> 
            <div class="player-item" id="item-p3">
                <div class="player-info">
                    <div class="player-avatar" style="background: var(--ludo-yellow);"></div>
                    <span class="player-name">Player 03</span>
                </div>
                <div class="setup-toggle-switch active" id="switch-p3">
                    <div class="setup-toggle-knob"></div>
                </div>
            </div> 
            <div class="player-item" id="item-p4">
                <div class="player-info">
                    <div class="player-avatar" style="background: var(--ludo-blue);"></div>
                    <span class="player-name">Player 04</span>
                </div>
                <div class="setup-toggle-switch active" id="switch-p4">
                    <div class="setup-toggle-knob"></div>
                </div>
            </div> 
        </div> 

        <button class="btn-play-elite" onclick="startGameFromSetup()">PLAY NOW</button>
    </div>
</div>

<div id="game-screen" class="screen">
    <div id="game-container">
        <svg id="ludo-board" viewBox="0 0 150 150" xmlns="http://www.w3.org/2000/svg">
            <defs>
                <radialGradient id="gold" cx="30%" cy="30%">
                  <stop offset="0%" stop-color="#fff3b0"/>
                  <stop offset="60%" stop-color="#ffcc33"/>
                  <stop offset="100%" stop-color="#c98a00"/>
                </radialGradient>
                <g id="coin">
                  <ellipse cx="0" cy="80" rx="75" ry="25" fill="rgba(0,0,0,0.3)" />
                  <circle cx="0" cy="0" r="75" fill="rgba(0,0,0,0.2)"/> 
                  <circle cx="0" cy="0" r="70" fill="url(#gold)"/>
                  <circle cx="0" cy="0" r="55" fill="var(--fill)" stroke="rgba(0,0,0,0.3)" stroke-width="2"/>
                  <path d="M-35 20 L-25 -20 L0 -5 L25 -20 L35 20 Z" fill="#ffd700" stroke="#b8860b" stroke-width="4"/>
                </g>
            </defs>
        </svg>
    </div>
    <button id="game-exit-btn" onclick="tryExitGame()" style="position: absolute; top: 10px; right: 10px; padding: 8px 15px; background: rgba(0,0,0,0.5); color: white; border: 1px solid white; border-radius: 5px; z-index: 200;">✕</button>
</div>

<div id="win-modal" class="modal">
    <div class="modal-content">
        <h2 id="win-title">অভিনন্দন!</h2>
        <p id="win-message">আপনি জিতেছেন।</p>
        <button class="btn-green" style="background: var(--ludo-green); color: white; padding: 10px 20px; border: none; border-radius: 5px; margin: 5px;" onclick="resetGame()">আবার খেলুন</button>
        <button class="btn-red" style="background: var(--ludo-red); color: white; padding: 10px 20px; border: none; border-radius: 5px; margin: 5px;" onclick="finishGameSession()">ফিরে যান</button>
    </div>
</div>

<!-- ✅ FIXED: Firebase v8 SDK (No Auth Error) -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

<!-- Main App Scripts -->
<script src="app.js"></script>
<script src="online.js"></script>

<!-- Firebase v8 SDK -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

<!-- Main App -->
<script src="app.js"></script>

<!-- Online Module -->
<script src="online.js"></script>

</body>
</html></body>
</html>